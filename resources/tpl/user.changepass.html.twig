{% extends 'base.html.twig' %}

{%- macro hasError(form) -%}
    {%- if (form.vars.errors|length) > 0 -%}
        {{- 'error' -}}
    {%- endif -%}
{%- endmacro -%}

{% import _self as macro %}

{% form_theme form _self %}

{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
        <span class="help-inline">
        {% for error in errors %}
            {{ error.messageTemplate }}          
        {% endfor %}
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}

{% block content %}


<h1><i class="icon-plus-sign"></i> Passwort &auml;ndern</h1>

<div class="row">
    <div class="span12">
        {% if app.request.get('success') %}
           <div class="alert alert-block alert-success">
               <button type="button" class="close" data-dismiss="alert">&times;</button>
               <h4>Success!</h4>
               Das Passwort wurde geändert.
           </div>
        {% endif %}
        
        {% if app.request.get('forced') %}
            <div class="alert alert-block alert-warning">
               <button type="button" class="close" data-dismiss="alert">&times;</button>
               <h4>Achtung!</h4>
               Bitte vor dem fortfahren Passwort ändern.
           </div>
        {% endif %}
            
        <form method="post" class="form-horizontal">
            <div class="control-group {{ macro.hasError(form.oldpass) }}">
               {{ form_label(form.oldpass, "", { 'label_attr': { 'class' : 'control-label' } }) }} 
               <div class="controls">
               {{ form_widget(form.oldpass) }}
               </div>
            </div>

            <div class="control-group {{ macro.hasError(form.oldpass) }}">
               {{ form_label(form.newpass, "", { 'label_attr': { 'class' : 'control-label' } }) }} 
               <div class="controls">
               {{ form_widget(form.newpass) }}
               </div>
            </div>

            <div class="control-group {{ macro.hasError(form.oldpass) }}">
               {{ form_label(form.newpassConfirm, "", { 'label_attr': { 'class' : 'control-label' } }) }} 
               <div class="controls">
               {{ form_widget(form.newpassConfirm) }}
               </div>
            </div>
            {{ form_rest(form) }}
            <div class="control-group">    
                <div class="controls">
                    <button type="submit" name="submit" class="btn btn-primary">Passwort &auml;ndern</button>
                </div>                
            </div>

        </form>
    </div>
</div>
{% endblock %}