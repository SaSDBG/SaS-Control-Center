{% extends 'base.default.html.twig' %}

{%- macro hasError(form) -%}
    {%- if (form.vars.errors|length) > 0 -%}
        {{- 'error' -}}
    {%- endif -%}
{%- endmacro -%}

{% import _self as macro %}

{% form_theme form _self %}

{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
        <span class="help-inline">
        {% for error in errors %}
            {{ error.messageTemplate }}
        {% endfor %}
        </span>
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}

{% block content %}


<h1><i class="icon-plus-sign"></i> Sch&uuml;ler hinzuf&uuml;gen</h1>


<div class="row">
    <div class="span12">
        <form method="post" class="form-horizontal" id="pupil-add">

            {% if app.request.get("success") %}
            <div class="alert alert-block alert-success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <h4>Success!</h4>
                {{ app.request.get("edited") ? "Änderungen gespeichert."|e : "Schüler erfolgreich hinzugefügt."|e }}
            </div>
            {% endif %}

            {% if form.vars.errors|length > 0 and app.request.method == 'POST' %}
                <div class="alert alert-block">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <h4>Achtung! Das Formular enthält Fehler.</h4>
                </div>
            {% endif %}

            <legend>Allgemeines</legend>

            <div class="control-group">
                   <div class="control-label">{{ form_label(form.firstName) }}</div>
                   <div class="controls">
                        {{ form_widget(form.firstName) }}
                   </div>
            </div>

            <div class="control-group">
                   <div class="control-label">{{ form_label(form.lastName) }}</div>
                   <div class="controls">
                        {{ form_widget(form.lastName) }}
                   </div>
            </div>
            
            <div class="control-group">
                   <div class="control-label">{{ form_label(form.rawClass) }}</div>
                   <div class="controls">
                        {{ form_widget(form.rawClass) }}
                   </div>
            </div>
            
            <legend>W&uuml;nsche</legend>
            
            <div class="control-group">
                   <div class="control-label">{{ form_label(form.firstWish) }}</div>
                   <div class="controls">
                        {{ form_widget(form.firstWish) }}
                   </div>
            </div>

            <div class="control-group">
                   <div class="control-label">{{ form_label(form.secondWish) }}</div>
                   <div class="controls">
                        {{ form_widget(form.secondWish) }}
                   </div>
            </div>
            
            <div class="control-group">
                   <div class="control-label">{{ form_label(form.thirdWish) }}</div>
                   <div class="controls">
                        {{ form_widget(form.thirdWish) }}
                   </div>
            </div>
            
            <div class="control-group">
                   <div class="control-label">{{ form_label(form.pupilLink) }}</div>
                   <div class="controls">
                        {{ form_widget(form.pupilLink) }}
                   </div>
            </div>
            {{ form_rest(form) }}

            <div class="controls">
                <button class="btn btn-primary btn-large" type="submit" id="submit-button">Speichern</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}


{% block css %}

<link rel="stylesheet" href="{{ app.request.baseUrl }}/assets/typeahead.js/typeahead.min.css">

{% endblock %}

{% block js %}
<script type="text/javascript" src="{{app.request.baseUrl}}/assets/nod/nod.js"></script>
<script type="text/javascript" src="{{ app.request.baseUrl }}/assets/typeahead.js/typeahead.min.js"></script>
<script type="text/javascript" src="http://twitter.github.com/hogan.js/builds/2.0.0/hogan-2.0.0.js"></script>
<script type="text/javascript" src="{{app.request.baseUrl}}/assets/js/pupil.js"></script>


{% endblock %}